{"ast":null,"code":"import React,{useState}from\"react\";import\"./ImageUpload.css\";import imageicon from\"../assets/imageicon.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ImageUpload=()=>{const[image,setImage]=useState(null);const[previewUrl,setPreviewUrl]=useState(\"\");const[extractedText,setExtractedText]=useState(\"\");const handleImageChange=e=>{if(e.target.files&&e.target.files[0]){let img=e.target.files[0];setImage(img);setPreviewUrl(URL.createObjectURL(img));processImage(img);}};// OCR 처리 함수\nconst processImage=async imgFile=>{const formData=new FormData();formData.append('image',imgFile);try{const response=await fetch('/api/ocr',{method:'POST',body:formData});if(!response.ok){throw new Error('OCR API request failed');}const result=await response.json();setExtractedText(result);}catch(error){console.error('Error processing image:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container_upload\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",onClick:()=>document.getElementById(\"fileInput\").click(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"uploadInfo\",children:\"\\uAC74\\uAC15\\uAC80\\uC9C4\\uD45C \\uC0AC\\uC9C4\\uC744 \\uB4F1\\uB85D\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:imageicon,alt:\"\\uC774\\uBBF8\\uC9C0\\uC544\\uC774\\uCF58\",className:\"imageicon\"}),\" \",/*#__PURE__*/_jsx(\"input\",{id:\"fileInput\",type:\"file\",onChange:handleImageChange,className:\"hidden\",accept:\"image/*\"})]}),previewUrl&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Image Preview\",className:\"image-preview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"extracted-text\",children:extractedText})]})]});};export default ImageUpload;","map":{"version":3,"names":["React","useState","imageicon","jsx","_jsx","jsxs","_jsxs","ImageUpload","image","setImage","previewUrl","setPreviewUrl","extractedText","setExtractedText","handleImageChange","e","target","files","img","URL","createObjectURL","processImage","imgFile","formData","FormData","append","response","fetch","method","body","ok","Error","result","json","error","console","className","children","onClick","document","getElementById","click","src","alt","id","type","onChange","accept"],"sources":["/Users/parkgyouyoung/IdeaProjects/ScanSavvy/src/main/frontend/src/components/ImageUpload.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./ImageUpload.css\";\nimport imageicon from \"../assets/imageicon.png\";\n\nconst ImageUpload = () => {\n    const [image, setImage] = useState(null);\n    const [previewUrl, setPreviewUrl] = useState(\"\");\n    const [extractedText, setExtractedText] = useState(\"\");\n\n    const handleImageChange = (e) => {\n        if (e.target.files && e.target.files[0]) {\n            let img = e.target.files[0];\n            setImage(img);\n            setPreviewUrl(URL.createObjectURL(img));\n            processImage(img);\n        }\n    };\n\n    // OCR 처리 함수\n    const processImage = async (imgFile) => {\n        const formData = new FormData();\n        formData.append('image', imgFile);\n\n        try {\n            const response = await fetch('/api/ocr', {\n                method: 'POST',\n                body: formData\n            });\n\n            if (!response.ok) {\n                throw new Error('OCR API request failed');\n            }\n\n            const result = await response.json();\n            setExtractedText(result);\n        } catch (error) {\n            console.error('Error processing image:', error);\n        }\n    };\n\n    return (\n        <div className=\"container_upload\">\n            <div\n                className=\"upload-container\"\n                onClick={() => document.getElementById(\"fileInput\").click()}\n            >\n                <div className=\"uploadInfo\">건강검진표 사진을 등록하세요</div>\n                <br/>\n                <img src={imageicon} alt=\"이미지아이콘\" className=\"imageicon\"/>{\" \"}\n                <input\n                    id=\"fileInput\"\n                    type=\"file\"\n                    onChange={handleImageChange}\n                    className=\"hidden\"\n                    accept=\"image/*\"\n                />\n            </div>\n            {previewUrl && (\n                <div>\n                    <img src={previewUrl} alt=\"Image Preview\" className=\"image-preview\"/>\n                    <div className=\"extracted-text\">{extractedText}</div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ImageUpload;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACS,UAAU,CAAEC,aAAa,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACW,aAAa,CAAEC,gBAAgB,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAEtD,KAAM,CAAAa,iBAAiB,CAAIC,CAAC,EAAK,CAC7B,GAAIA,CAAC,CAACC,MAAM,CAACC,KAAK,EAAIF,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,CACrC,GAAI,CAAAC,GAAG,CAAGH,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAC3BR,QAAQ,CAACS,GAAG,CAAC,CACbP,aAAa,CAACQ,GAAG,CAACC,eAAe,CAACF,GAAG,CAAC,CAAC,CACvCG,YAAY,CAACH,GAAG,CAAC,CACrB,CACJ,CAAC,CAED;AACA,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAC,OAAO,EAAK,CACpC,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEH,OAAO,CAAC,CAEjC,GAAI,CACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,UAAU,CAAE,CACrCC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,QACV,CAAC,CAAC,CAEF,GAAI,CAACG,QAAQ,CAACI,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAC7C,CAEA,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CACpCpB,gBAAgB,CAACmB,MAAM,CAAC,CAC5B,CAAE,MAAOE,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACnD,CACJ,CAAC,CAED,mBACI5B,KAAA,QAAK8B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7B/B,KAAA,QACI8B,SAAS,CAAC,kBAAkB,CAC5BE,OAAO,CAAEA,CAAA,GAAMC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,KAAK,CAAC,CAAE,CAAAJ,QAAA,eAE5DjC,IAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,kFAAe,CAAK,CAAC,cACjDjC,IAAA,QAAI,CAAC,cACLA,IAAA,QAAKsC,GAAG,CAAExC,SAAU,CAACyC,GAAG,CAAC,sCAAQ,CAACP,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,cAC7DhC,IAAA,UACIwC,EAAE,CAAC,WAAW,CACdC,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAEhC,iBAAkB,CAC5BsB,SAAS,CAAC,QAAQ,CAClBW,MAAM,CAAC,SAAS,CACnB,CAAC,EACD,CAAC,CACLrC,UAAU,eACPJ,KAAA,QAAA+B,QAAA,eACIjC,IAAA,QAAKsC,GAAG,CAAEhC,UAAW,CAACiC,GAAG,CAAC,eAAe,CAACP,SAAS,CAAC,eAAe,CAAC,CAAC,cACrEhC,IAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEzB,aAAa,CAAM,CAAC,EACpD,CACR,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAL,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}